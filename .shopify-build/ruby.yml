containers:
  default:
    docker: ruby:2.4-stretch

shared:
  builder: &builder
    timeout: 10m
    run:
    - bin/ci/setup-pbuilder-base.sh ${TARGET_DIST}
    #- cd ruby && ../ruby_build --distributions "${TARGET_DIST}" --name
    cache:
    - /var/cache/pbuilder

steps:
- <<: *builder
  label: Build trusty
  env:
    TARGET_DIST: trusty
- <<: *builder
  label: Build precise
  env:
    TARGET_DIST: precise
